\documentclass{article}
\usepackage{packages}

\newcommand{\im}{\mathrm{Im}}

\title{Коллоквиум по Дискретной математике, 2 курс}
\author{Залялов Александр, @bcategorytheory,\\  Солодовников Никита, @applied\_memes \\ Шморгунов Александр, @Owlus }
\date{}

\begin{document}

\maketitle

\setcounter{section}{9}
\section{Определение машин Тьюринга и вычислимых на машинах Тьюринга функций. Тезис Чёрча-Тьюринга. Неразрешимость проблемы остановки машины Тьюринга.}
Машина Тьюринга задаётся\footnote{Здесь машина Тьюринга определяется в соответсвии с лекцией. Следует понимать, что это определение не является общепринятым. Вариаций масса: кто-то запрещает головке оставаться на месте, кто-то выделяет выходной алфавит, отличный от входного и т. д.}
\begin{itemize}
	\item непустым конечным алфавитом $\Sigma$, среди которого выделен пробельный символ $\vartextvisiblespace$ и не содержащее пробела подмножество $\Gamma$ --- входной алфавит;
	\item непустым конечным множеством состояний $Q$, среди которых выделено начальное состояние $s_0$ и множество терминальных состояний $F$;
	\item функцией переходов $\delta:(Q \setminus F) \times \Sigma \to Q \times \Sigma \times \{-1, 0, +1\}$.
\end{itemize}

Машина Тьюринга состоит из бесконечной ленты, разбитой на ячейки, головки, в любой момент времени указывающей на одну ячейку и одной ячейки памяти, в которой хранится текущее состояние. В начальный момент времени на ленте записано некоторое слово, составленное из букв входного алфавита, головка смотрит на первый символ этого слова, во всех остальных ячейках пробелы. Затем в каждый момент времени вычисляется $\delta(q, c) = (q', c', \Delta)$, где $q$ --- текущее состояние, $c$ --- символ записанный в ячейке, на которую сейчас смотрит головка. Состояние меняется на $q'$, символ в текущей ячейке на $c'$, головка остаётся на месте или передвигается на один влево или вправо в соответствии со значением $\Delta$. Если $q'$ оказалось терминальным, на этом работа машины заканчивается, иначе этот процесс продолжается.

Машины Тьюринга естественным образом отождествляются с частичными функциями $f:\Gamma^* \to \Gamma^*$ --- аргументом функции является входное слово, а возвращает функция слово, записанное на ленте после завершения работы машины(то есть всё, что написано на ленте, кроме бесконечного числа пробелов слева и справа). Функции будут частичными, поскольку машина Тьюринга может продолжать работать бесконечно или в данной конструкции может оказаться, что на выходе есть символ, не содержащийся в $\Gamma$. Функции, которые можно таким образом получить по некоторой машине Тьюринга, называются вычислимыми на машине Тьюринга.
\paragraph{Тезис Чёрча-Тьюринга.} \textit{Любая вычислимая функция вычислима на машине Тьюринга.} 

Здесь понятие "вычислимая функция" используется в неформальном смысле, под ним понимается функция, вычислимая в любой разумной модели, которая может прийти вам в голову. Тезис не является формальным утверждением, он никак не доказывается и принимается нами на веру.

\begin{theorem}
	Не существует вычислимой функции, определяющей по машине Тьюринга и входному слову, остановится ли эта машина. 
\end{theorem}
Теперь, когда мы отождествили вычислимые и вычислимые на машине Тьюринга функции, эта теорема непосредственно следует из доказательства теоремы о существовании полного перечислимого множества из 7 билета.

\section{Неразрешимость проблемы достижимости в односторонних ассоциативных исчислениях. Полугруппы, заданные порождающими и соотношениями. Теорема Маркова–Поста: неразрешимость проблемы равенства слов в некоторой конечно определенной полугруппе (без доказательства).}

\begin{definition}
	\textit{Односторонним ассоциативным исчислением} называется множество из всех слов над некоторым конечным алфавитом и конечный набор подстановок. Каждая подстановка представляет собой пару слов $(s, t)$ и позволяет в любом слове содержащем $s$ как подстроку заменить её на $t$ (но не наоборот).
\end{definition}

\begin{theorem}
	Существует одностороннее ассоциатвиное исчисление, в котором не разрешима задача проверить по паре слов, можно ли некоторой последовательностью подстановок перейти от первого ко второму.
\end{theorem}

\begin{proof}
	Возьмём некоторую машину Тьюринга $M$, для которой неразрешима проблема остановки, при чём если такую, что если она останавливается, то на ленте записано пустое слово. Построим по ней одностороннее ассоциативное исчисление, в котором из $[X]$ можно получить $Y$, если и только если $M$ преобразует $X$ в $Y$. В качестве алфавита для исчисления возьмём объединение алфавита $M$ и её множества состояний (а также квадратные скобки и символы $\triangleleft, \triangleright$). Будем сопоставлять конфигурациям машины слова исчисления. Если машина находится в состоянии $s$, на ленте записано слово $PQ$(конкатенация слов $P$ и $Q$) и головка указывает на первый символ слова $Q$, сопоставим такой конфигурации слово $[PsQ]$ в нашем исчислении. Тут важно, что мы считаем, что у машины не пересекаются алфавит и множество состояний. Построим по переходам машины подстановки для исчисления.
	
	\begin{center} \begin{tabular}{c | c }
		Переход МТ & Подстановка одностороннего ассоциативного исчисления \\ \hline
		$(s, c) \mapsto (s', c', 0)$ & $sc \to s'c'$ \\
		$(s, c) \mapsto (s', c', +1)$ & $sc \to c's'$ \\
		$(s, c) \mapsto (s', c', -1)$ & $xsc \to s'xc'$ --- для каждого символа $x$ из алфавита машины, а также $[sc \to [s'\vartextvisiblespace c'$ \\
		$(s, \vartextvisiblespace) \mapsto (s', c', 0)$ & $s] \to s'c']$ \\
		$(s, \vartextvisiblespace) \mapsto (s', c', +1)$ & $s] \to c's']$ \\
		$(s, \vartextvisiblespace) \mapsto (s', c', -1)$ & $xs] \to s'xc']$
	\end{tabular} \end{center}

	Дополнительно к этому введём подстановки, позволяющие получить пустое слово, если машина остановится.
	\begin{itemize}
		\item $f \to \triangleleft$, $f$ --- терминальное состояние;
		\item $c\triangleleft \to \triangleleft, c \ne [$;
		\item $[\triangleleft \to \triangleright$;
		\item $\triangleright c \to \triangleright, c \ne ]$;
		\item $\triangleright ] \to \varepsilon$(пустое слово).
	\end{itemize}

	Это можно было бы реализовать проще без двух дополнительных символов, но так мы получаем, что всегда существует ровно одна последовательностей подстановок, моделирующих работу машины Тьюринга. Осталась одна деталь --- мы пообщеали, что мы начнём с $[X]$, а не с $[s_0X]$. Она решается просто --- добавлением подстановки $[x \to [s_0x$ для всех символом $x$ из алфавита машины. 

	Итак, мы свели задачу остановки машины Тьюринга (про которую было известно, что она неразрешима) к задаче достижимости в одностороннем ассоциативном исчислении и показали этим, что эта задача тоже неразрешима.
\end{proof}
Теорема Маркова-Поста гласит, что если потребовать, чтобы все подстановки были двухсторонними, то задача останется неразрешимой, но доказывать этот факт от нас не требуют. При чём такую задачу можно сформулировать на языке алгебры:

Пусть про некоторую полугруппу известно, что она содержит\footnote{Можно потребовать, чтобы в полугруппе были только элементы, порождённые заданными. Это никак не меняет задачу.} элементы $a_1, \ldots, a_n$ и в ней выполняются некоторые (конечное количество) равенства вида $a_{i_1}a_{i_2}\ldots a_{i_k} = a_{j_1}a_{j_2}\ldots a_{j_m}$. Обязательно ли в ней выполняется заданное равенство такого же вида?

\section{Исчисление высказываний (аксиомы и правила вывода), понятие вывода. Теорема корректности исчисления высказываний}
Высказываниями мы называем утверждения, которые либо истинны, либо ложны. При этом если $A, B$ являются высказываниями, то $\lnot A, A \lor B, A \land B, A \to B$ --- тоже высказывания. Из такого определения никак не следует, что высказывания вообще существуют, так что в любом применении исчисления высказываний также описывают некоторые атомарные высказывания. Но нам для доказательства общих фактов это никак не потребуется. Исчисление высказываний задаётся аксиомами и правилами вывода. У нас имеется 11 аксиом:
\begin{enumerate}
	\item $(A \to (B \to C)) \to ((A \to B) \to (A \to C))$
	\item $A \to (B \to A)$
	\item $A \land B \to A$
	\item $A \land B \to B$
	\item $A \to (B \to A \land B)$
	\item $A \to A \lor B$
	\item $B \to A \lor B$
	\item $(A \to C) \to ((B \to C) \to ((A \lor B) \to C))$
	\item $\lnot A \to (A \to B)$
	\item $(A \to B) \to ((A \to \lnot B) \to \lnot A)$
	\item $A \lor \lnot A$
\end{enumerate}
и 1 правило вывода(modus ponens)
\[\tfrac{A \to B, \; A}{B} \]

Вывод в исчислении высказываний --- это последовательность из операций двух видов
\begin{itemize}
	\item Подстановка в некоторую аксиому любых высказываний вместо $A, B, C$.
	\item Применение правила вывода. Если уже выведены $A\to B$ и $A$, можно вывести $B$
\end{itemize}

\begin{theorem}{(Корректность исчисления резолюций)}
	Любая формула, которую можно вывести в исчислении высказываний, истинна(тавтологична).
\end{theorem}
Здесь мы называем формулу истинной(тавтологичной), если она как булева формула верна при всех значениях входящих в неё переменных. Отметим, что только в этом контексте мы понимаем $\lnot, \lor, \land$ как привычные логические операции. С точки зрения исчисления высказываний, это просто какие-то символы, всё что мы про них знаем --- это аксиомы и правило.
\begin{proof}
	Достаточно убедиться, что все действия, который мы можем производить в ходе вывода не позволяют получить ложное выражение. Во-первых, все аксиомы истинны при любых значениях входящих в них переменных. Во-вторых, если $A \to B$ истинно и $A$ истинно, то $B$ истинно.
\end{proof}

\section{Вывод из гипотез. Лемма о дедукции. Полезные производные правила.}
Пусть $\Gamma$ --- некоторое множество высказываний(гипотез). Тогда говорят, что формула $A$ выводится из $\Gamma$, если её можно вывести,  разрешая пользоваться не только аксиомами и правилом вывода, но и высказываниями из $\Gamma$. Можно сказать, что у нас появилась третья операция: бесплатно получить формулу из $\Gamma$. Обозначение: $\Gamma \vdash A$. В таких терминах можно сказать, что формула, которую можно вывести в исчислении высказываний,  выводится из пустого множества гипотез, обозначение: $\ \vdash A$.

\begin{lemma}
	$\ \vdash A \to A$
\end{lemma}

\begin{proof}
	\begin{enumerate}
		\item $A \to (A \to A)$(2 аксиома)
		\item $\lnot A \to (A \to A)$ (9 аксиома)
		\item $A \lor \lnot A$ (11 аксиома)
		\item $(A \to (A \to A)) \to ((\lnot A \to (A \to A)) \to ((A \lor \lnot A) \to (A \to A)))$ (8 аксиома, подставлены $A, \lnot A, A \to A$)
		\item $(\lnot A \to (A \to A)) \to (A \lor \lnot A) \to (A \to A)$ (modus ponens)
		\item $(A \lor \lnot A) \to (A \to A)$ (modus ponens)
		\item $A \to A$ (modus ponens)
	\end{enumerate}
\end{proof}

\begin{theorem}{(Лемма о дедукции)}
	$\Gamma \cup \{A\} \vdash B \implies \Gamma \vdash (A \to B)$
\end{theorem}

\begin{proof}
	Пусть с набором гипотез $\Gamma \cup \{A\}$ мы могли вывести формулу $B$, последовательно выводя формулы $B_1, B_2, \ldots, B_n, B_n = B$. По индукции докажем, что с набором гипотез $\Gamma$ можно доказать последовательность $A \to B_1, \ldots, A \to B_n$. Разберём для этого все способы, которыми мы умеем выводить
	\begin{enumerate}
	\item $B_i$ получено как гипотеза. Если $B_i = A$, то по лемме мы сможем вывести $A \to A$. Иначе нам доступен такой вывод: $B_i, B_i \to (A \to B_i), A \to B_i$.
	\item $B_i$ получено подставлением формул в аксиому. Работает последовательность из предыдущего пункта.
	\item $B_i$ получено по modus ponens из $B_j$ и $B_k(j < i , k < i)$. Тогда без потери общности считаем, что $B_j = B_k \to B_i$. По предположению индукции мы уже вывели $A \to B_k$ и $A \to (B_k \to B_i)$. По первой аксиоме выведем $A \to (B_k \to B_i) \to ((A \to B_k) \to (A \to B_i))$. Дважды применив к этому modus ponens, получим $A \to B_i$.
	\end{enumerate}
\end{proof}
Некоторые производные правила --- следствия из леммы о дедукции:
\begin{itemize}
	\item Из $A$ и $B$ можно вывести $A \land B$.
	\item Если из $\Gamma \cup \{A\}$ можно вывести $B$ и $\lnot B$, то из $\Gamma$ можно вывести $\lnot A$ (производное правило доказательства от противного).
	\item Если из $\Gamma \cup \{A\}$ можно вывести $B$ и из $\Gamma \cup \{\lnot A\}$ можно вывести $B$, то из $\Gamma$ можно вывести $B$ (производное правило разбора случаев).
	\item Из $A, \lnot A$ можно вывести что угодно.
\end{itemize}

\section{Теорема полноты исчисления высказываний.}
\begin{lemma}
	Пусть формула $A$ зависит от переменных $p_1, \ldots, p_n$. При этом при $(p_1, \ldots, p_n) = (\varepsilon_1, \ldots, \varepsilon_n)$ формула выдаёт значение $\varepsilon$. Тогда $\{p_1^{\varepsilon_1}, \ldots, p_n^{\varepsilon_n}\} \vdash A^{\varepsilon}$, где
\[P^\varepsilon = \begin{dcases*} \lnot P, & $\varepsilon = 0$ \\ P& $\varepsilon = 1$ \end{dcases*} \]
\end{lemma}

\begin{proof}
	Доказательство индукцией по построению формулы $A$. Разбираем все способы, которыми она была построена, а для них все значения её составных частей.
	\begin{enumerate}
		\item $A = p$. Очевидно, $p \vdash p$ и $\lnot p \vdash \lnot p$.
		\item $A = B \land C$. 
		\begin{enumerate}
			\item Пусть $B$ и $C$ истинны. Тогда по предположению индукции мы можем вывести $B$ и $C$ и требуется показать, что мы можем вывести $B \land C$. Мы умеем это делать по производному правилу.
			\item Пусть $B$ истинно, а $C$ ложно. Тогда по предположению индукции мы можем вывести $B$ и $\lnot C$, и хотим вывести $\lnot(B \land C)$. Воспользуемся правилом доказательства от противного и добавим себе в гипотезы $B \land C$. Из $B \land C$ нетрудно вывести $C$, и мы умеем выводить $\not C$, противоречие достигнуто.
		\end{enumerate}
		Оставшиеся два случая аналогичны второму.
		\item $A = B \lor C$. Если хотя бы одно из $B$ или $C$ истинно, то ясно, что можно вывести $B \lor C$. Пусть теперь мы умеем выводить $\lnot B, \lnot C$ и нужно вывести $\lnot (B \lor C)$. Снова будем выводить от противного и предположим $B \lor C$. Заметим, что из $\lnot B, \lnot C, B$ можно вывести всё что угодно, и из $\lnot B, \lnot C, C$ можно вывести всё что угодно. Тогда всё что угодно можно вывести и из $\lnot B, \lnot C, B \lor C$, в том числе и противоречие.
		\item $A = B \to C$. Для случаев с истинным $B$ или ложным $C$ вывод простой --- достаточно воспользоваться 2 или 9 аксиомой (и modus ponens). Пусть мы умеем выводить $B, \lnot C$ и нужно вывести $\lnot(B \to C)$. Опять докажем от противного и по modus ponens из $B, B \to C$ выведем $C$. Это даст противоречие, поскольку у нас есть $\lnot C$.
		\item $A = \lnot B$. Ясно, что $\lnot B \vdash \lnot B$. Нужно доказать, что $B \vdash \lnot \lnot B$. Для этого нужно в очередной раз доказать от противного и вывести из $B, \lnot B$ какое-нибудь противоречие. Но $B, \lnot B$ уже противоречие.
	\end{enumerate}
\end{proof}

\begin{theorem}{(Полнота исчисления высказываний)}
	Любую тавтологию можно вывести в исчислении высказываний.
\end{theorem}

\begin{proof}
	Пусть тавтология $A$ зависит от переменных $p_1, \ldots, p_n$. Тогда по лемме $p_1, \ldots, p_n \vdash A$. И $p_1, \ldots, \lnot p_n \vdash A$. И вообще как угодно можно расставить отрицания, потому что $A$ --- тавтология. Из двух приведённых фактов по производному правилу $p_1, \ldots, p_{n - 1}, p_n \lor \lnot p_n \vdash A$. Но $p_n \lor \lnot p_n$ можно получить из аксиомы, значит это можно выкинуть из списка гипотез и получить $p_1, \ldots, p_{n - 1} \vdash A$. Аналогично начав с $p_1, \ldots, \lnot p_{n - 1}, p_n \vdash A$ и $p_1, \ldots, \lnot p_{n - 1}, \lnot p_n \vdash A$, мы получим $p_1, \ldots, \lnot p_{n - 1} \vdash A$. Из этих двух результатов мы сможем избавиться от $p_{n - 1}$ и получить $p_1, \ldots, p_{n - 2} \vdash A$. Долго повторяя этот процесс, мы избавимся от всех переменных и получим $\ \vdash A$, а это то, что требовалось.  
\end{proof}

\section{Исчисление резолюций для опровержения пропозициональных формул в конъюнктивной нормальной форме (КНФ): дизъюнкты, правило резолюции, опровержение КНФ в исчислении резолюций. Теорема корректности исчисления резолюций (для пропозициональных формул в КНФ)}
Если исчисление высказываний работало с произвольными формулами, построенными с помощью отрицания, конъюнкции, дизъюнкции и импликации, исчисление резолюций работает только с дизъюнктами.

\begin{definition} \textit{Литерал} --- переменная или отрицание переменной \end{definition}
\begin{definition} \textit{Дизъюнкт} --- это дизъюнкция по некоторому конечному множеству литералов \end{definition}

Обратите внимание, что в этом определении речь про множество. Хотя мы записываем дизъюнкты как формулы $\lambda_1 \lor \lambda_2 \lor \ldots \lor \lambda_n$, мы считаем, что, к примеру, $\lambda_1 \lor \lambda_2, \lambda_2 \lor \lambda_1, \lambda_1 \lor \lambda_2 \lor \lambda_1$ --- это всё один и тот же дизъюнкт.

У исчисления резолюций нет аксиом и есть одно правило --- правило резолюции
\[\tfrac{A \lor p, \; B \lor \lnot p}{A \lor B} \]
Отметим, что при применении правила к $p$ и $\lnot p$ результатом будет пустой дизъюнкт, который обозначается как $\perp$(или как $\square$). 

На записанные в КНФ пропозиональные формулы можно смотреть как на множества дизъюнктов в исчислении резолюций. Будем говорить, что множество дизъюнктов совместно, если есть набор значений переменных, при котором каждый дизъюнкт возвращает истину. Утверждается, что из множества дизъюнктов можно вывести в исчислени пустой дизъюнкт, если и только если множество несовместно.

\begin{theorem}{(Корректность исчисления резолюций)}
	Если множества дизъюнктов можно вывести пустой дизъюнкт, то оно несовместно.
\end{theorem}
\begin{proof}
	Можно убедиться, что из истинных (при каких-то значениях переменных) формул можно вывести только истинные (при тех же значениях). Но пустой дизъюнкт всегда ложен.

	Если вам по каким-либо причинам не нравятся слова о ложности пустого дизъюнкта, можно сказать, что пустой дизъюнкт можно вывести только из $p, \lnot p$, а они не могут быть истинны одновременно.
\end{proof}

\section{Теорема полноты исчисления резолюций (для пропозициональных формул в КНФ). Доказательство только для конечных и счетных множеств формул.}
\begin{theorem}{(Полнота исчисления резолюций)}
	Если множество дизъюнктов $S$ несовместно, то из него можно вывести пустой дизъюнкт.
\end{theorem}
Докажем для случая, когда $S$ не более чем счётно.
\begin{proof}
	Применим контрапозицию и докажем, что если из $S$ нельзя вывести пустой дизъюнкт, то оно совместно. Обозначим за $S'$ множество всех формул, которые можно вывести из $S$. Поскольку множество дизъюнктов не более чем счётно, а сами дизъюнкты конечны, множество используемых переменных тоже будет не более чем счётно. Занумеруем их $x_1, x_2, \ldots$. Докажем, что можно так выбрать значения переменным, что для любого $n$ все дизъюнкты из $S'$, содержащие только переменные с номерами не больше $n$, истинны. Ясно, что это и означает совместность. Доказывать будем индукцией по $n$.
	\paragraph{База индукции.} Это могло бы быть неверно для $n = 1$, только если бы в $S'$ содержались $x_1$ и $\lnot x_1$. Но такого быть не может, ведь тогда мы могли бы вывести пустой дизъюнкт.
	\paragraph{Шаг индукции.} По предположению индукции мы уже как-то умеем выбирать значения для переменных $x_1, \ldots, x_n$. Предположим, выбрать значение для $x_{n + 1}$ нельзя.
	\begin{itemize}
	\item $x_{n + 1} = 0$ не подходит $\implies A \lor x_{n + 1} \in S'$, где $A$ содержит только $x_1,\ldots, x_n$ и ложно при выбранных для них значениях.
	\item $x_{n + 1} = 1$ не подходит $\implies B \lor \lnot x_{n + 1} \in S'$, где $B$ содержит только $x_1,\ldots, x_n$ и ложно при выбранных для них значениях.
	\end{itemize}
	Но тогда можно вывести $A \lor B$. Поскольку $A \lor B$ содержит только $x_1, \ldots, x_n$, по предположению индукции оно верно при выбранных значениях. А значит не может быть, что и $A$, и $B$ ложны, противоречие. 
\end{proof}
На самом деле аналогичным образом можно было бы доказать корректность и для несчётных множеств формул (для корректности индукции пришлось бы прибегнуть к теореме Цермело), но несчётное число переменных --- это крайне нетипичная ситуация и этим мы тут не занимаемся.

\section{Полиномиальный алгоритм сведения задачи распознавания совместности конечных множеств произвольных формул к задаче распознавания совместности конечных множеств дизъюнктов.}
Перейти от формулы к конечному множеству дизъюнктов --- то же самое, что привести её к КНФ. Ясно, что формулу длины $l$, зависящую от $m$ переменных, можно за $O(2^m \cdot l)$ --- построить таблицу истинности и взять дизъюнкты, соответствующие строкам, в которых формула ложна, но этот метод не полиномиальный.

Пусть наша формула имеет вид $f(A, B)$ --- где $A, B$ --- некоторые формулы, а $f$ --- операция, выполняющаяся в нашей формуле последней. Тогда введём новые переменные $x', x''$ и заменим нашу формулу на $f(x', x'') \land (x' \equiv A) \land (x'' \equiv B)$. Длина формулы $f(x', x'')$ ---константа, следовательно экспоненциальный метод сведёт её к КНФ за $O(1)$. Повторим процедуру для формул $x' \equiv A$ и $x'' \equiv B$, если $A$ и $B$ -- это не просто переменные. За каждый запуск наивного алгоритма мы избавляемся от одной операции в исходной формуле, поэтому время работы можно оценить как $O(l)$.

Мы дали описание для бинарных операций, но ясно, что тот же самый подход замены выражений на переменные применим и для отрицания, и для каких-то экзотических операций. 

\section{Определение формулы первого порядка в данной сигнатуре. Свободные и связанные вхождения переменных. Интерпретации данной сигнатуры. Общезначимые и выполнимые формулы. Равносильные формулы.}
\begin{definition} \textit{Сигнатура} языка --- набор функциональных и предикатных символов определённых валентностей. \end{definition}
Формулы первого порядка состоят из кванторов, индвидных переменных, функциональных и предикатных символов. Но для того, чтобы дать корректное определение формуле первого порядка, нам потребуется ввести ещё несколько вспомогательных понятий. Во-первых, \textit{терм}.
\begin{enumerate}
	\item Любая индвидная переменная является термом.
	\item Если $f$ --- функциональный символ валентности $n$, а $t_1, \ldots, t_n$ --- термы, то $f(t_1, \ldots, t_n)$ --- терм.
\end{enumerate}
 Во-вторых, будем называть \textit{атомарной формулой} выражение вида $P(t_1, \ldots, t_n)$, где $P$ --- предикатный символ валентности $n$, а $t_1, \ldots, t_n$ --- термы. Теперь мы готовы дать определение формуле первого порядка (далее --- просто формуле).
\begin{definition}
	\begin{enumerate}
		\item Атомарные формулы являются формулами.
		\item Если $a, b$ --- формулы, то $(a \land b), (a \lor b), (a \to b), \lnot a$ также являются формулами.
		\item Если $a$ --- формула, то $(\exists x \  a)$ и $(\forall x \  a)$ также являются формулами.
	\end{enumerate}
\end{definition}
Скобки в определении нужны для того, чтобы можно было однозначно определять приоритет операций. Для удобства мы (как и любой разумный человек) не будем ставить все из этих скобок.

Если перед каждым появлением переменной в формуле в составе терма эта переменная появляется под квантором, говорят что она \textit{связана} в этой формуле. Иначе говорят, что она входит в формулу \textit{свободно}. Формула без свободных вхождений переменных называется \textit{замкнутой}.
\begin{definition}
	\textit{Интерпретация} данной сигнатуры состоит из непустого множества $M$ (\textit{носителя}) и функций, сопоставленных каждому символу. Функциональному символу $f$ валентности $n$ сопоставляется функция $\hat{f}:M^n \to M$, а предикатному символу $p$ валентности $m$ --- функция $\hat{p}:M^m \to \{0, 1\}$.

Ясно, что после выбора интерпретации любой замкнутой формуле данной сигнатуры можно одннозначно сопоставить значение. При этом формула называется \textit{общезначимой}, если она верна в любой интерпретации и \textit{выполнимой}, если верна хотя бы в какой-то. Обычно эти термины применяют только к замкнутым формулам, но если формула содержит свободные переменные, то считается, что она верна, если она верна при любых их значениях. Формулы $A$ и $B$ называются равносильными, если формула $(A \to B) \land (B \to A)$ общезначима.
\end{definition}

\section{Теории и их модели. Семантическое следование. Теорема Черча об алгоритмической неразрешимости отношения семантического следования и общезначимости формул (в доказательстве теоремы можно использовать существование конечно определенной полугруппы с неразрешимой проблемой равенства).}
\begin{definition} \textit{Теория} --- некоторое множество замкнутых формул \end{definition}
\begin{definition} 
	Интерпретация $M$ соответствующей сигнатуры, в которой верны все формулы теории $T$, называется \textit{моделью} $T$. Обозначение: $M \vDash T$.
\end{definition}
\begin{definition}
	Формула $A$ называется \textit{семантическим следствием} теории $T$, если в любой модели $T$ истинна $A$. Обозначение: $T \vDash A$
\end{definition}
\begin{theorem}{(Чёрч)}
	Множество общезначимых формул неразрешимо
\end{theorem}
\begin{proof}
	Будем говорить, что теория $T$ разрешима, если множество формул $\{A | T \vDash A\}$ разрешимо. Тогда если найдётся неразрешимая теория с конечным числом формул, теорема будет доказана. Действительно, пусть $T = \{A_1, \ldots, A_n\}$. Тогда проверить, следует ли из неё формула $A$ --- то же самое, что проверить, общезначима ли формула $(A_1 \land \ldots \land A_n) \to A$. Значит если мы не умеем проверять на следование из теории, то не умеем и проверять на общезначимость.
	
	Построим неразрешимую теорию, пользуясь теоремой Маркова-Поста. Выберем некоторую полугруппу, порождённую $a_1, \ldots, a_n$ с неразрешимой проблемой равенства. В качестве сигнатуры возьмём функциональные символы $\cdot, =$ валентности 2 и $a_1, \ldots, a_n$ валентности 0. В качестве аксиом возьмём аксиому полугруппы $\forall x \forall y \forall z \  x \cdot (y \cdot z) = (x \cdot y) \cdot z$ и все имеющиеся у нас равенства. Теперь проблема равенства превращается в проверку на семантическое следование из этой теории, значит оно тоже неразрешимо.
\end{proof}
\end{document}
